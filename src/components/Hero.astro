---
import { Image } from 'astro:assets';
---

<section class="user-cloud relative h-screen w-full">
  <div class="brands-carousel relative pl-0 h-full overflow-hidden">
    {
      ['Hero-1.webp', 'Hero-2.webp', 'Hero-3.webp', 'Hero-1.webp'].map((heroImg) => (
        <picture class="h-screen object-cover w-full absolute top-0 flex justify-center">
          <Image
            class="h-fit w-fit lg:h-full lg:w-full "
            src={`/images/${heroImg}`}
            alt="A bird."
            width="1200"
            height="1200"
          />
        </picture>
      ))
    }
  </div>
</section>

<style>
  .brands-carousel > picture {
    animation: carousel 15s linear infinite;
    transform: translateX(100%);
  }

  .brands-carousel > picture:nth-child(1) {
    animation-name: first-picture, carousel;
    animation-duration: 15s;
    animation-iteration-count: 1, infinite;
    animation-delay: 0s, 15s;
    transform: translateX(0%);
  }
  .brands-carousel > picture:nth-child(2) {
    animation-delay: Calc(15s * 0.33);
  }
  .brands-carousel > picture:nth-child(3) {
    animation-delay: Calc(15s * 0.66);
  }

  @keyframes first-picture {
    0% {
      transform: translateX(0%);
    }
    7.5%,
    33% {
      transform: translateX(0);
    }
    40.5%,
    100% {
      transform: translateX(-100%);
    }
  }

  @keyframes carousel {
    0% {
      transform: translateX(100%);
    }
    7.5%,
    33% {
      transform: translateX(0);
    }
    40.5%,
    100% {
      transform: translateX(-100%);
    }
  }

  @keyframes first-picture-responsive {
    0% {
      transform: translateX(0%);
    }
    5.5%,
    25% {
      transform: translateX(0);
    }
    30.5%,
    100% {
      transform: translateX(-100%);
    }
  }

  @keyframes carousel-responsive {
    0% {
      transform: translateX(100%);
    }
    5.5%,
    25% {
      transform: translateX(0);
    }
    30.5%,
    100% {
      transform: translateX(-100%);
    }
  }

  @media screen and (max-width: 766px) {
    .brands-container {
      max-width: 200px;
    }
    .brands-carousel > picture {
      animation: carousel-responsive 20s linear infinite;
    }

    .brands-carousel > picture:nth-child(1) {
      animation-name: first-picture-responsive, carousel-responsive;
      animation-duration: 20s;
      animation-iteration-count: 1, infinite;
      animation-delay: 0s, 20s;
    }

    .brands-carousel > picture:nth-child(2) {
      animation-delay: Calc(20s * 0.25);
    }
    .brands-carousel > picture:nth-child(3) {
      animation-delay: Calc(20s * 0.5);
    }
    .brands-carousel > picture:nth-child(4) {
      animation-delay: Calc(20s * 0.75);
      display: block;
    }
  }
</style>
